# FreeRTOS实战学习记录

## 第 2 天：2026年1月20日
### 今日主题：第一次尝试freeRTOS

---

## 任务完成清单
- 1. 新建FreeRTOS工程
- 2. 创建两个任务
- 3. 配置LED引脚
- 4. 编译下载验证

---

## 关键操作记录
### 1. 环境配置
- 开发板型号：STM32F103C8T6
- IDE版本：STM32CubeIDE 1.13.0
- FreeRTOS版本：CMSIS_V2


### 2. 代码实现
```c
// 关键代码片段
void Task1_LED(void *argument) {
    for(;;) {
        HAL_GPIO_TogglePin(LED_GPIO_Port, LED_Pin);
        osDelay(500);
    }
}
```

### 3. 硬件连接
| 设备 | 引脚 | 备注 |
|------|------|------|
| 板载LED | PC13 | 低电平点亮 |
| OLED_SCL | PB6 | I2C1 |
| OLED_SDA | PB7 | I2C1 |

## 现象观察与验证
### 预期现象
1. OLED显示计数器稳定增加
2. LED以1秒周期闪烁
3. 两者独立运行

### 实际现象
<video controls src="实际现象.mp4" title="第2天：OLED计数+LED闪烁" width="600"></video>

**文字描述：**
- OLED：成功显示计数器，从000001开始稳定增加
- LED：板载LED（PC13）规律闪烁
- 独立性：计数器更新不影响LED节奏，证明多任务并发
- 稳定性：运行10分钟无卡顿、复位现象

## 问题与调试
| 问题 | 原因分析 | 解决方案 | 效果 |
|------|---------|---------|------|
| OLED不显示 | I2C地址错误 | 改为0x78 | ✅ |
| LED不闪烁 | 电平控制反了 | GPIO_PIN_SET/RESET交换 | ✅ |

## 核心理解与思考
### 1. 技术要点
- FreeRTOS任务创建流程：`osThreadNew()`
- 任务必须包含无限循环和主动让出（`osDelay()`）
- STM32F103板载LED电路特点：低电平点亮

### 2. 认知突破
- 传统单片机：顺序执行，一次一件事
- FreeRTOS：并发执行，看起来"同时"做多件事
- 调度器就像"老板"，决定哪个"工人"（任务）何时工作

### 3. 疑问与思考
- 问题1：如果去掉`osDelay()`会怎样？
- 问题2：如何知道任务栈是否足够？
- 明天想探索：任务优先级的影响

## 收获与感悟
> "今天最大的收获是亲眼看到两个LED以不同节奏独立闪烁，这是多任务系统最直观的证明。从概念到实物，从理论到实践，这种成就感是单纯看书无法比拟的。"